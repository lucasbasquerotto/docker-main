params:

- name: "main/log/efk/vars.main"
  params:
    data_dir: "{{ params_aux.local_data_dir_inside | default(params_aux.data_dir, true) }}"
    volumes: {{ params.volumes | default([]) | to_json }}
    services: {{ params.volumes | default([]) | to_json }}
    fluentd:
      elasticsearch_port: "{{ params.elasticsearch.port | default('9200') }}"
      flush_interval: "{{ params.fluentd.flush_interval | default('1s') }}"

- name: "main/compose/vars.compose.yml"
  params: 
    compose: {{ params.compose | to_json }}
    env:  
      base_params: "{{ params_aux }}"
      env_params: ""